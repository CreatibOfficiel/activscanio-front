if(!self.define){let e,s={};const a=(a,c)=>(a=new URL(a+".js",c).href,s[a]||new Promise(s=>{if("document"in self){const e=document.createElement("script");e.src=a,e.onload=s,document.head.appendChild(e)}else e=a,importScripts(a),s()}).then(()=>{let e=s[a];if(!e)throw new Error(`Module ${a} didn’t register its module`);return e}));self.define=(c,n)=>{const i=e||("document"in self?document.currentScript.src:"")||location.href;if(s[i])return;let t={};const r=e=>a(e,i),f={module:{uri:i},exports:t,require:r};s[i]=Promise.all(c.map(e=>f[e]||r(e))).then(e=>(n(...e),t))}}define(["./workbox-0c822247"],function(e){"use strict";importScripts(),self.skipWaiting(),e.clientsClaim(),e.precacheAndRoute([{url:"/_next/static/TFY4hCa5btN9BWdcm3w63/_buildManifest.js",revision:"574d9cc6cbb15807d9ca4e14962e47d0"},{url:"/_next/static/TFY4hCa5btN9BWdcm3w63/_ssgManifest.js",revision:"b6652df95db52feb4daf4eca35380933"},{url:"/_next/static/chunks/135-968defb9b22f1e82.js",revision:"968defb9b22f1e82"},{url:"/_next/static/chunks/195-3a6e1ae8f39f67f8.js",revision:"3a6e1ae8f39f67f8"},{url:"/_next/static/chunks/224-1e2425e575426d8c.js",revision:"1e2425e575426d8c"},{url:"/_next/static/chunks/239-67b7fbaec486d8bd.js",revision:"67b7fbaec486d8bd"},{url:"/_next/static/chunks/296-2b7f837adb0f9ba2.js",revision:"2b7f837adb0f9ba2"},{url:"/_next/static/chunks/39-4cecd000a1558230.js",revision:"4cecd000a1558230"},{url:"/_next/static/chunks/495-62dd07c9a61334d8.js",revision:"62dd07c9a61334d8"},{url:"/_next/static/chunks/4bd1b696-409494caf8c83275.js",revision:"409494caf8c83275"},{url:"/_next/static/chunks/500-946022b0da04e35a.js",revision:"946022b0da04e35a"},{url:"/_next/static/chunks/561.83ad311d8be1606e.js",revision:"83ad311d8be1606e"},{url:"/_next/static/chunks/720-7c503373571041c5.js",revision:"7c503373571041c5"},{url:"/_next/static/chunks/795d4814-e6212848a65ffa2f.js",revision:"e6212848a65ffa2f"},{url:"/_next/static/chunks/810-9883ea7bd234aefe.js",revision:"9883ea7bd234aefe"},{url:"/_next/static/chunks/811.25b3debdf131c12f.js",revision:"25b3debdf131c12f"},{url:"/_next/static/chunks/852-814b55e83c1511ba.js",revision:"814b55e83c1511ba"},{url:"/_next/static/chunks/876-cbf26a354ddeca0b.js",revision:"cbf26a354ddeca0b"},{url:"/_next/static/chunks/979.dd168f1c316f2ea0.js",revision:"dd168f1c316f2ea0"},{url:"/_next/static/chunks/app/_not-found/page-929393d81accd453.js",revision:"929393d81accd453"},{url:"/_next/static/chunks/app/achievements/page-f2ef8609ee1a816e.js",revision:"f2ef8609ee1a816e"},{url:"/_next/static/chunks/app/betting/history/page-06c43ab162a8d7f0.js",revision:"06c43ab162a8d7f0"},{url:"/_next/static/chunks/app/betting/layout-2fd376aeae906d3a.js",revision:"2fd376aeae906d3a"},{url:"/_next/static/chunks/app/betting/place-bet/page-de2befb73d4070ce.js",revision:"de2befb73d4070ce"},{url:"/_next/static/chunks/app/betting/rankings/page-0b3ccd5fbbd7072a.js",revision:"0b3ccd5fbbd7072a"},{url:"/_next/static/chunks/app/competitors/add/page-acdd43daf6e4423c.js",revision:"acdd43daf6e4423c"},{url:"/_next/static/chunks/app/competitors/edit/%5Bid%5D/page-b6bb70c465f2a0a2.js",revision:"b6bb70c465f2a0a2"},{url:"/_next/static/chunks/app/layout-489e1367b5679360.js",revision:"489e1367b5679360"},{url:"/_next/static/chunks/app/onboarding/page-a05e75a292f5371d.js",revision:"a05e75a292f5371d"},{url:"/_next/static/chunks/app/page-211ff79979e66ea2.js",revision:"211ff79979e66ea2"},{url:"/_next/static/chunks/app/profile/page-bc479197b7efca72.js",revision:"bc479197b7efca72"},{url:"/_next/static/chunks/app/races/add/page-d2d4eea9151bdff1.js",revision:"d2d4eea9151bdff1"},{url:"/_next/static/chunks/app/races/page-5e9e2da676970673.js",revision:"5e9e2da676970673"},{url:"/_next/static/chunks/app/races/score-setup/layout-2fd376aeae906d3a.js",revision:"2fd376aeae906d3a"},{url:"/_next/static/chunks/app/races/score-setup/page-b278b64b6b1a2b58.js",revision:"b278b64b6b1a2b58"},{url:"/_next/static/chunks/app/races/summary/layout-2fd376aeae906d3a.js",revision:"2fd376aeae906d3a"},{url:"/_next/static/chunks/app/races/summary/page-6471468417f2e001.js",revision:"6471468417f2e001"},{url:"/_next/static/chunks/app/seasons/%5Byear%5D/%5Bmonth%5D/page-653c7a8f616bfd73.js",revision:"653c7a8f616bfd73"},{url:"/_next/static/chunks/app/seasons/page-5ed52b486809b870.js",revision:"5ed52b486809b870"},{url:"/_next/static/chunks/app/tv/display/page-98c1602bb5a5eb95.js",revision:"98c1602bb5a5eb95"},{url:"/_next/static/chunks/framework-f792e0f2520a7a63.js",revision:"f792e0f2520a7a63"},{url:"/_next/static/chunks/main-a8f0be4e1cc8e0f6.js",revision:"a8f0be4e1cc8e0f6"},{url:"/_next/static/chunks/main-app-78a75c0e7ea9ba53.js",revision:"78a75c0e7ea9ba53"},{url:"/_next/static/chunks/pages/_app-fcbe3e68b26044e2.js",revision:"fcbe3e68b26044e2"},{url:"/_next/static/chunks/pages/_error-394ce64747f32b60.js",revision:"394ce64747f32b60"},{url:"/_next/static/chunks/polyfills-42372ed130431b0a.js",revision:"846118c33b2c0e922d7b3a7676f81f6f"},{url:"/_next/static/chunks/webpack-dd7ff4195eb7af6c.js",revision:"dd7ff4195eb7af6c"},{url:"/_next/static/css/2ae4573080978142.css",revision:"2ae4573080978142"},{url:"/apple-touch-icon.png",revision:"b848b25adf26694530fc81c1ebf0d470"},{url:"/favicon.png",revision:"a82977448f97cfa0a71d8f8f76cb4b02"},{url:"/file.svg",revision:"d09f95206c3fa0bb9bd9fefabfd0ea71"},{url:"/fonts/SFPRODISPLAYBLACKITALIC.OTF",revision:"647ad7b734271f858d61a94283fd0502"},{url:"/fonts/SFPRODISPLAYBOLD.OTF",revision:"644563f48ab5fe8e9082b64b2729b068"},{url:"/fonts/SFPRODISPLAYHEAVYITALIC.OTF",revision:"d70a8b7adbe065dd69b16459ffab4231"},{url:"/fonts/SFPRODISPLAYLIGHTITALIC.OTF",revision:"bee8986f3bf3e269e81e7b64996e423c"},{url:"/fonts/SFPRODISPLAYMEDIUM.OTF",revision:"51fd7406327f2b1dbc8e708e6a9da9a5"},{url:"/fonts/SFPRODISPLAYREGULAR.OTF",revision:"aaeac71d99a345145a126a8c9dd2615f"},{url:"/fonts/SFPRODISPLAYSEMIBOLDITALIC.OTF",revision:"fce0a93d0980a16d75a2f71173c80838"},{url:"/fonts/SFPRODISPLAYTHINITALIC.OTF",revision:"9d5ed420ac3a432eb716c670ce00b662"},{url:"/fonts/SFPRODISPLAYULTRALIGHTITALIC.OTF",revision:"fa570fc4ded697c72608eae4e3675959"},{url:"/globe.svg",revision:"2aaafa6a49b6563925fe440891e32717"},{url:"/icons/icon-128x128.png",revision:"82c05c5d4572647634810217c2a69638"},{url:"/icons/icon-144x144.png",revision:"d832461ee81ad51b624dcbbc16b76ad1"},{url:"/icons/icon-152x152.png",revision:"bd9a28320e5c7373b526221f2f57a540"},{url:"/icons/icon-192x192.png",revision:"5e7ae4878ea0d3f778ccee4bec7b6281"},{url:"/icons/icon-384x384.png",revision:"7848d5b1537020ed820d25904ded6054"},{url:"/icons/icon-512x512.png",revision:"1ee36e1dc859fa67174344859cbc5040"},{url:"/icons/icon-72x72.png",revision:"8f3f1388b6ca29a11d967fbecf4e5095"},{url:"/icons/icon-96x96.png",revision:"2807ee51f43ccd870aa916a96443c44d"},{url:"/icons/icon-maskable-192x192.png",revision:"d6c4b0c54b28027a117cba0bfec6b030"},{url:"/icons/icon-maskable-512x512.png",revision:"050072db3b96dd5bfe7159c0095b3e57"},{url:"/icons/icon-placeholder.png",revision:"c30c7d42707a47a3f4591831641e50dc"},{url:"/manifest.json",revision:"e623088688ad5223707c2c026cc1f289"},{url:"/next.svg",revision:"8e061864f388b47f33a1c3780831193e"},{url:"/sw-custom-template.js",revision:"d5ff0f98ef52c48ac150c7f195b5be06"},{url:"/sw.js",revision:"98da82de508049aac51bda6a63c0e3a9"},{url:"/vercel.svg",revision:"c0af2f507b369b085b35ef4bbe3bcf1e"},{url:"/window.svg",revision:"a2760511c65806022ad20adf74370ff3"}],{ignoreURLParametersMatching:[/^utm_/,/^fbclid$/]}),e.cleanupOutdatedCaches(),e.registerRoute("/",new e.NetworkFirst({cacheName:"start-url",plugins:[{cacheWillUpdate:function(e){var s=e.response;return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,s&&"opaqueredirect"===s.type?new Response(s.body,{status:200,statusText:"OK",headers:s.headers}):s]})})()}}]}),"GET"),e.registerRoute(/^https?:\/\/[^\/]+\/(?!api|_next\/static).*/i,new e.NetworkFirst({cacheName:"pages-cache",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:50,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/^https?:.*\.(png|jpg|jpeg|webp|svg|gif|js|css)$/i,new e.CacheFirst({cacheName:"static-assets-cache",plugins:[new e.ExpirationPlugin({maxEntries:200,maxAgeSeconds:2592e3})]}),"GET"),e.registerRoute(/^https?:.*\.(woff|woff2|ttf|otf)$/i,new e.CacheFirst({cacheName:"font-cache",plugins:[new e.ExpirationPlugin({maxEntries:20,maxAgeSeconds:31536e3})]}),"GET"),e.registerRoute(/^https:\/\/cdn\.prod\.website-files\.com\/.*/i,new e.CacheFirst({cacheName:"cdn-images-cache",plugins:[new e.ExpirationPlugin({maxEntries:100,maxAgeSeconds:604800})]}),"GET"),e.registerRoute(/^https?:\/\/[^\/]+\/api\/.*/i,new e.NetworkOnly,"GET"),self.__WB_DISABLE_DEV_LOGS=!0});

// Custom push notification handlers
self.addEventListener('push', (event) => {
  const data = event.data?.json() ?? {};

  const title = data.title || 'Activscanio';
  const options = {
    body: data.body || '',
    icon: data.icon || '/icons/icon-192x192.png',
    badge: '/icons/icon-72x72.png',
    tag: data.tag || 'default',
    data: data.data || {},
    requireInteraction: data.requireInteraction || false,
    vibrate: [200, 100, 200],
    silent: false,
    renotify: true,
    actions: data.actions || [],
  };

  event.waitUntil(
    self.registration.showNotification(title, options)
  );
});

self.addEventListener('notificationclick', (event) => {
  event.notification.close();

  const urlToOpen = event.notification.data?.url || '/';

  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true })
      .then((windowClients) => {
        for (let client of windowClients) {
          if (client.url.includes(urlToOpen) && 'focus' in client) {
            return client.focus();
          }
        }
        if (clients.openWindow) {
          return clients.openWindow(urlToOpen);
        }
      })
  );
});

self.addEventListener('notificationclose', (event) => {
  console.log('[SW] Notification fermée', event.notification.tag);
});
