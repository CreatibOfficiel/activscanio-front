if(!self.define){let e,s={};const a=(a,c)=>(a=new URL(a+".js",c).href,s[a]||new Promise(s=>{if("document"in self){const e=document.createElement("script");e.src=a,e.onload=s,document.head.appendChild(e)}else e=a,importScripts(a),s()}).then(()=>{let e=s[a];if(!e)throw new Error(`Module ${a} didn’t register its module`);return e}));self.define=(c,i)=>{const n=e||("document"in self?document.currentScript.src:"")||location.href;if(s[n])return;let t={};const r=e=>a(e,n),f={module:{uri:n},exports:t,require:r};s[n]=Promise.all(c.map(e=>f[e]||r(e))).then(e=>(i(...e),t))}}define(["./workbox-0c822247"],function(e){"use strict";importScripts(),self.skipWaiting(),e.clientsClaim(),e.precacheAndRoute([{url:"/_next/static/AxJQA9iyffWQgGZRshJsE/_buildManifest.js",revision:"db1612f6ebc5d5b744421d4fe9ab6676"},{url:"/_next/static/AxJQA9iyffWQgGZRshJsE/_ssgManifest.js",revision:"b6652df95db52feb4daf4eca35380933"},{url:"/_next/static/chunks/129-463983bff193287d.js",revision:"463983bff193287d"},{url:"/_next/static/chunks/142-2ff1e13bbe8309d6.js",revision:"2ff1e13bbe8309d6"},{url:"/_next/static/chunks/195-56566ffb22281756.js",revision:"56566ffb22281756"},{url:"/_next/static/chunks/239-3c17a6d641bde0df.js",revision:"3c17a6d641bde0df"},{url:"/_next/static/chunks/296-4809b90f2a77333a.js",revision:"4809b90f2a77333a"},{url:"/_next/static/chunks/39-75824844c0b0d499.js",revision:"75824844c0b0d499"},{url:"/_next/static/chunks/495-0aae9a67c0e8b5d7.js",revision:"0aae9a67c0e8b5d7"},{url:"/_next/static/chunks/4bd1b696-c023c6e3521b1417.js",revision:"c023c6e3521b1417"},{url:"/_next/static/chunks/500-7e8ebc9008f3b421.js",revision:"7e8ebc9008f3b421"},{url:"/_next/static/chunks/561.298714a85c4a21a6.js",revision:"298714a85c4a21a6"},{url:"/_next/static/chunks/638-3b4b57caaf79f465.js",revision:"3b4b57caaf79f465"},{url:"/_next/static/chunks/720-8d5292a2a76a19bb.js",revision:"8d5292a2a76a19bb"},{url:"/_next/static/chunks/795d4814-675c55ef4bd8c181.js",revision:"675c55ef4bd8c181"},{url:"/_next/static/chunks/811.8136822ae4973622.js",revision:"8136822ae4973622"},{url:"/_next/static/chunks/852-691269c4acf99778.js",revision:"691269c4acf99778"},{url:"/_next/static/chunks/979.a08f877cdff051c8.js",revision:"a08f877cdff051c8"},{url:"/_next/static/chunks/app/_not-found/page-8ce01c131f32db27.js",revision:"8ce01c131f32db27"},{url:"/_next/static/chunks/app/achievements/page-b56b6ca0e781b43e.js",revision:"b56b6ca0e781b43e"},{url:"/_next/static/chunks/app/betting/history/page-195c2aa085ad9de1.js",revision:"195c2aa085ad9de1"},{url:"/_next/static/chunks/app/betting/layout-5d519510da63130d.js",revision:"5d519510da63130d"},{url:"/_next/static/chunks/app/betting/place-bet/page-6c25051ec9406d14.js",revision:"6c25051ec9406d14"},{url:"/_next/static/chunks/app/betting/rankings/page-a07853beb17024d1.js",revision:"a07853beb17024d1"},{url:"/_next/static/chunks/app/competitors/add/page-1d523ac1574d4825.js",revision:"1d523ac1574d4825"},{url:"/_next/static/chunks/app/competitors/edit/%5Bid%5D/page-5554b346583c3733.js",revision:"5554b346583c3733"},{url:"/_next/static/chunks/app/layout-cd5fb8c97224cc7a.js",revision:"cd5fb8c97224cc7a"},{url:"/_next/static/chunks/app/onboarding/page-10a8f2d06e839b56.js",revision:"10a8f2d06e839b56"},{url:"/_next/static/chunks/app/page-948e865bff638187.js",revision:"948e865bff638187"},{url:"/_next/static/chunks/app/profile/page-a256bd97248caf88.js",revision:"a256bd97248caf88"},{url:"/_next/static/chunks/app/races/add/page-b655c7e3d9f5ff30.js",revision:"b655c7e3d9f5ff30"},{url:"/_next/static/chunks/app/races/page-20e439722f7c0b4d.js",revision:"20e439722f7c0b4d"},{url:"/_next/static/chunks/app/races/score-setup/layout-5d519510da63130d.js",revision:"5d519510da63130d"},{url:"/_next/static/chunks/app/races/score-setup/page-b9bda95f63b29ea7.js",revision:"b9bda95f63b29ea7"},{url:"/_next/static/chunks/app/races/summary/layout-5d519510da63130d.js",revision:"5d519510da63130d"},{url:"/_next/static/chunks/app/races/summary/page-9bd8248bee8ca586.js",revision:"9bd8248bee8ca586"},{url:"/_next/static/chunks/app/seasons/%5Byear%5D/%5Bmonth%5D/page-2ff9fd12501a9fa5.js",revision:"2ff9fd12501a9fa5"},{url:"/_next/static/chunks/app/seasons/page-f5e95701cd81f97f.js",revision:"f5e95701cd81f97f"},{url:"/_next/static/chunks/app/tv/display/page-92fd5786482af9ce.js",revision:"92fd5786482af9ce"},{url:"/_next/static/chunks/framework-d7de93249215fb06.js",revision:"d7de93249215fb06"},{url:"/_next/static/chunks/main-app-ac9b71998cf67f49.js",revision:"ac9b71998cf67f49"},{url:"/_next/static/chunks/main-b7bcd3166051307d.js",revision:"b7bcd3166051307d"},{url:"/_next/static/chunks/pages/_app-6c493b83aa965ae0.js",revision:"6c493b83aa965ae0"},{url:"/_next/static/chunks/pages/_error-72a33df56bf599c8.js",revision:"72a33df56bf599c8"},{url:"/_next/static/chunks/polyfills-42372ed130431b0a.js",revision:"846118c33b2c0e922d7b3a7676f81f6f"},{url:"/_next/static/chunks/webpack-fa219ceba8b4fd30.js",revision:"fa219ceba8b4fd30"},{url:"/_next/static/css/32ac2f1f95a42a10.css",revision:"32ac2f1f95a42a10"},{url:"/apple-touch-icon.png",revision:"b848b25adf26694530fc81c1ebf0d470"},{url:"/favicon.png",revision:"a82977448f97cfa0a71d8f8f76cb4b02"},{url:"/file.svg",revision:"d09f95206c3fa0bb9bd9fefabfd0ea71"},{url:"/fonts/SFPRODISPLAYBLACKITALIC.OTF",revision:"647ad7b734271f858d61a94283fd0502"},{url:"/fonts/SFPRODISPLAYBOLD.OTF",revision:"644563f48ab5fe8e9082b64b2729b068"},{url:"/fonts/SFPRODISPLAYHEAVYITALIC.OTF",revision:"d70a8b7adbe065dd69b16459ffab4231"},{url:"/fonts/SFPRODISPLAYLIGHTITALIC.OTF",revision:"bee8986f3bf3e269e81e7b64996e423c"},{url:"/fonts/SFPRODISPLAYMEDIUM.OTF",revision:"51fd7406327f2b1dbc8e708e6a9da9a5"},{url:"/fonts/SFPRODISPLAYREGULAR.OTF",revision:"aaeac71d99a345145a126a8c9dd2615f"},{url:"/fonts/SFPRODISPLAYSEMIBOLDITALIC.OTF",revision:"fce0a93d0980a16d75a2f71173c80838"},{url:"/fonts/SFPRODISPLAYTHINITALIC.OTF",revision:"9d5ed420ac3a432eb716c670ce00b662"},{url:"/fonts/SFPRODISPLAYULTRALIGHTITALIC.OTF",revision:"fa570fc4ded697c72608eae4e3675959"},{url:"/globe.svg",revision:"2aaafa6a49b6563925fe440891e32717"},{url:"/icons/icon-128x128.png",revision:"82c05c5d4572647634810217c2a69638"},{url:"/icons/icon-144x144.png",revision:"d832461ee81ad51b624dcbbc16b76ad1"},{url:"/icons/icon-152x152.png",revision:"bd9a28320e5c7373b526221f2f57a540"},{url:"/icons/icon-192x192.png",revision:"5e7ae4878ea0d3f778ccee4bec7b6281"},{url:"/icons/icon-384x384.png",revision:"7848d5b1537020ed820d25904ded6054"},{url:"/icons/icon-512x512.png",revision:"1ee36e1dc859fa67174344859cbc5040"},{url:"/icons/icon-72x72.png",revision:"8f3f1388b6ca29a11d967fbecf4e5095"},{url:"/icons/icon-96x96.png",revision:"2807ee51f43ccd870aa916a96443c44d"},{url:"/icons/icon-maskable-192x192.png",revision:"d6c4b0c54b28027a117cba0bfec6b030"},{url:"/icons/icon-maskable-512x512.png",revision:"050072db3b96dd5bfe7159c0095b3e57"},{url:"/icons/icon-placeholder.png",revision:"c30c7d42707a47a3f4591831641e50dc"},{url:"/manifest.json",revision:"e623088688ad5223707c2c026cc1f289"},{url:"/next.svg",revision:"8e061864f388b47f33a1c3780831193e"},{url:"/sw.js",revision:"98da82de508049aac51bda6a63c0e3a9"},{url:"/vercel.svg",revision:"c0af2f507b369b085b35ef4bbe3bcf1e"},{url:"/window.svg",revision:"a2760511c65806022ad20adf74370ff3"}],{ignoreURLParametersMatching:[/^utm_/,/^fbclid$/]}),e.cleanupOutdatedCaches(),e.registerRoute("/",new e.NetworkFirst({cacheName:"start-url",plugins:[{cacheWillUpdate:function(e){var s=e.response;return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,s&&"opaqueredirect"===s.type?new Response(s.body,{status:200,statusText:"OK",headers:s.headers}):s]})})()}}]}),"GET"),e.registerRoute(/^https?:\/\/[^\/]+\/(?!api|_next\/static).*/i,new e.NetworkFirst({cacheName:"pages-cache",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:50,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/^https?:.*\.(png|jpg|jpeg|webp|svg|gif|js|css)$/i,new e.CacheFirst({cacheName:"static-assets-cache",plugins:[new e.ExpirationPlugin({maxEntries:200,maxAgeSeconds:2592e3})]}),"GET"),e.registerRoute(/^https?:.*\.(woff|woff2|ttf|otf)$/i,new e.CacheFirst({cacheName:"font-cache",plugins:[new e.ExpirationPlugin({maxEntries:20,maxAgeSeconds:31536e3})]}),"GET"),e.registerRoute(/^https:\/\/cdn\.prod\.website-files\.com\/.*/i,new e.CacheFirst({cacheName:"cdn-images-cache",plugins:[new e.ExpirationPlugin({maxEntries:100,maxAgeSeconds:604800})]}),"GET"),e.registerRoute(/^https?:\/\/[^\/]+\/api\/.*/i,new e.NetworkOnly,"GET"),self.__WB_DISABLE_DEV_LOGS=!0});

// Custom push notification handlers
self.addEventListener('push', (event) => {
  const data = event.data?.json() ?? {};

  const title = data.title || 'Activscanio';
  const options = {
    body: data.body || '',
    icon: data.icon || '/icons/icon-192x192.png',
    badge: '/icons/icon-72x72.png',
    tag: data.tag || 'default',
    data: data.data || {},
    requireInteraction: data.requireInteraction || false,
    vibrate: [200, 100, 200],
    silent: false,
    renotify: true,
    actions: data.actions || [],
  };

  event.waitUntil(
    self.registration.showNotification(title, options)
  );
});

self.addEventListener('notificationclick', (event) => {
  event.notification.close();

  const urlToOpen = event.notification.data?.url || '/';

  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true })
      .then((windowClients) => {
        for (let client of windowClients) {
          if (client.url.includes(urlToOpen) && 'focus' in client) {
            return client.focus();
          }
        }
        if (clients.openWindow) {
          return clients.openWindow(urlToOpen);
        }
      })
  );
});

self.addEventListener('notificationclose', (event) => {
  console.log('[SW] Notification fermée', event.notification.tag);
});
